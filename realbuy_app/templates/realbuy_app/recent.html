{% extends 'realbuy_app/base.html' %}
{% load static %}
{% load property_tags %}
{% block title %}
Recent Properties{% endblock %}
{% block styles %}
<style type="text/css">
.carousel{
    position:absolute;
    top:123px;
    left:693px;
    height:532px;
    width:652px;
}

</style>
{% endblock %}
{% block content %}
<div id="recentBigBox"></div>
<div id="recentBigBox2"></div>
<span id="recentHead1">Recent</span> <span id="recentHead2">Properties</span>
<a href="{% url 'category_recent' 'commercial' %}"><button type="button" class="recentTopRight" id="recentTopRight1">COMMERCIAL</button></a>
<a href="{% url 'category_recent' 'furnished home'|slugify %}"><button type="button" class="recentTopRight" id="recentTopRight2">FURNISHED HOMES</button></a>
<a href="{% url 'category_recent' 'land and plot'|slugify %}"><button type="button" class="recentTopRight" id="recentTopRight3">LAND&amp;PLOT</button></a>
<a href="{% url 'category_recent' 'rental' %}"><button type="button" class="recentTopRight" id="recentTopRight4">RENTAL</button></a>
<!--
<div id="recentCarousel" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#recentCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#recentCarousel" data-slide-to="1"></li>
    <li data-target="#recentCarousel" data-slide-to="2"></li>
  </ol>  
  <div class="carousel-inner">
     
    {% for prop in object_list %}
    {% if forloop.counter0 == 0 %}
    <div class="carousel-item active">
           
            <div class="recentContent">

                
                {% for i in '012345678'|make_list %}
                <div class="recentList">
                    {% with object_list|list_item:forloop.parentloop.counter0 as property %}

                    {{property.id}}
                    <a  href="{% url 'detail' property.id %}">
                    <img class="recentImage" src="{{property.image.url}}">
                    </a>
                    {% if property.sell_or_rent == 'sell' %}
                    <div class="recentSell"> ON SALE </div>
                    {% else %}
                    <div class="recentRent"> ON RENT </div>
                    {% endif %}
                    <div class="recentCity"> {{ property.city}}</div>
                    <div class="recentAddress"> {{ property.address|slice:":30" }}</div>
                    <div class="recentPrice">
                    <span class="recentPrice1">&#8377; </span>
                    <span class="recentPrice2">{{ property.price}}</span><span class="recentPrice3">/Month</span>
                        
                    </div>
                    <form action="{% url 'like_post' property.pk %}" method="POST">
                    {% csrf_token %}
                    {% if liked %}
                    <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_white.png' %}"></button>
                    
                    {% else %}
                    <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_select.png' %}"></button>
                    
                    {% endif %}
                    </form>
                    {% endwith %}
                </div>
                {{ forloop.parentloop.counter0 | add:"1" }}
                {% endfor %}
            </div>  
                 
    </div>
    {% else %}
    <div class="carousel-item">
           
            <div class="recentContent">

                
                {% for i in '012345678'|make_list %}
                <div class="recentList">
                    {% with object_list|list_item:forloop.parentloop.counter0 as property %}

                    {{property.id}}
                    <a  href="{% url 'detail' property.id %}">
                    <img class="recentImage" src="{{property.image.url}}">
                    </a>
                    {% if property.sell_or_rent == 'sell' %}
                    <div class="recentSell"> ON SALE </div>
                    {% else %}
                    <div class="recentRent"> ON RENT </div>
                    {% endif %}
                    <div class="recentCity"> {{ property.city}}</div>
                    <div class="recentAddress"> {{ property.address|slice:":30" }}</div>
                    <div class="recentPrice">
                    <span class="recentPrice1">&#8377; </span>
                    <span class="recentPrice2">{{ property.price}}</span><span class="recentPrice3">/Month</span>
                        
                    </div>
                    <form action="{% url 'like_post' property.pk %}" method="POST">
                    {% csrf_token %}
                    {% if liked %}
                    <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_white.png' %}"></button>
                    
                    {% else %}
                    <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_select.png' %}"></button>
                    
                    {% endif %}
                    </form>
                    {% endwith %}
                </div>
                {{ forloop.parentloop.counter0 | add:"1" }}
                {% endfor %}
            </div>  
                 
    </div>
    {% endif %}
    {% endfor %} 

  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> -->

<div class="recentContent">
{% for property in object_list %}
    <div class="recentList">
        <a  href="{% url 'detail' property.id %}">
        <img class="recentImage" src="{{property.image.url}}">
        </a>
        {% if property.sell_or_rent == 'sell' %}
        <div class="recentSell"> ON SALE </div>
        {% else %}
        <div class="recentRent"> ON RENT </div>
        {% endif %}
        <div class="recentCity"> {{ property.city}}</div>
        <div class="recentAddress"> {{ property.address|slice:":30" }}</div>
        <div class="recentPrice">
        <span class="recentPrice1">&#8377; </span>
        {% if property.sell_or_rent == 'rent' %}
        <span class="recentPrice2">{{ property.price}}/Month</span>
        {% else %}
        <span class="recentPrice2">{{property.price}}</span>
        {% endif %}

            
        </div>
        <form action="{% url 'like_post' property.pk %}" method="POST">
        {% csrf_token %}
        {% if liked %}
        <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_select.png' %}"></button>
        
        {% else %}
        <button class="recentLike" type="submit" name="post_id" value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_white.png' %}"></button>
        
        {% endif %}
        </form>
        }
    </div>
{% endfor %}
</div>    
<div class="recentContent">
{% for property in category_property %}
    <div class="recentList">
        <a  href="{% url 'detail' property.id %}">
            <img class="recentImage" src="{{property.image.url}}">
        </a>
        {% if property.sell_or_rent == 'sell' %}
        <div class="recentSell"> ON SALE </div>
        {% else %}
        <div class="recentRent"> ON RENT </div>
        {% endif %}
        <div class="recentCity"> {{ property.city}}</div>
        <div class="recentAddress"> {{ property.address|slice:":30" }}</div>
        <div class="recentPrice">
            <span class="recentPrice1">&#8377; </span>
            {% if property.sell_or_rent == 'rent' %}
            <span class="recentPrice2">{{ property.price}}/Month</span>
            {% else %}
            <span class="recentPrice2">{{property.price}}</span>
            {% endif %}
            
        </div>
        
        <form action="{% url 'like_post' property.pk %}" method="POST">
        {% csrf_token %}
        {% if user.is_authenticated %}
            {% if liked %}
            <button class="recentLike" type="submit", name="post_id", value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_white.png' %}"></button>
            {% else %}
            <button class="recentLike" type="submit", name="post_id", value="{{ property.id }}"><img class="recentLikeImage" src="{% static 'realbuy_app/images/fav_select.png' %}"></button>
            {% endif %}
        {% endif %}</form>
    </div>
    
{% endfor %}
</div>  


{% endblock %}
